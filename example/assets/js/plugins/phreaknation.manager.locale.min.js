!function(){"use strict";var __modulename="locale_manager",__pluginname="LocaleManager",__version=[0,1,0],__description="",__author="Joel Dies <phreaknation@gmail.com>",__schemas={},__locale={locales:{en:{en:"English"},"en-us":{bind:"en"}}},__defaultLocale="en",plugin=function(game,parent){return Phaser.Plugin.call(this,game,parent),"undefined"==typeof console.error&&(console.error=console.log),this.game=game,this.parent=parent,this.schemas=__schemas,this};plugin.prototype=Object.create(Phaser.Plugin.prototype),plugin.prototype.constructor=Phaser.Plugin.SamplePlugin,__schemas.localeFile={$schema:"http://json-schema.org/draft-04/schema#",title:"restConfig",description:"RESTful API config pattern",type:"object",properties:{locales:{type:"object",patternProperties:{"^.+$":{$ref:"#locale"}}},dictionary:{type:"object",patternProperties:{"^.+$":{$ref:"#locale"}}},locale:{id:"#locale",type:"object",patternProperties:{"^[a-zA-Z0-9_]$":{type:"string"}}}}},plugin.prototype.description=function(){return _.toTitleCase(_.replace(__modulename,/\_/g," "))+" plugin by "+__author+". "+__description},plugin.prototype.getAllLocales=function(){return __locale.locales},plugin.prototype.getBinding=function(locale){return locale=locale||__defaultLocale,this.getBound(locale,!0)},plugin.prototype.getBound=function(locale,getBinding){if(locale=locale||__defaultLocale,this.isBound(locale)){var binding=__locale.locales[locale].bind,bound=__locale.locales[binding];if(_.isObject(bound))return getBinding===!0?binding:bound}return locale},plugin.prototype.getLocale=function(){return __defaultLocale},plugin.prototype.getLocaleNames=function(locale){if(locale=locale||__defaultLocale,this.isBound(locale)){var binding=this.getBinding(locale);if(_.isString(binding))return __locale.locales[binding]}return __locale.locales[locale]},plugin.prototype.getWord=function(key,locale){var __funcname="getWord";if(locale=locale||__defaultLocale,!_.isString(key))return console.error("[%s][%s] Argument key needs to be a string. It is of type `%s` and value `%s`.",__modulename,__funcname,typeof key,key),!1;if(this.isBound(locale)){var binding=this.getBinding(locale);_.isString(binding)&&(locale=binding)}var word=__locale.dictionary[key][locale];return _.isString(word)?word:(console.error("[%s][%s] The word is either undefined or not of string type. It is of type `%s` and value `%s`.",__modulename,__funcname,typeof word,word),!1)},plugin.prototype.isBound=function(locale){return locale=locale||__defaultLocale,!!_.isString(__locale.locales[locale].bind)},plugin.prototype.load=function(data,merge){var valid,__funcname="load";return(valid=ajv.validate(this.schemas.localeFile,data))?(merge=merge||!1,__locale=merge?_.merge(__locale,data):_.merge({},data)):(console.error("[%s][%s] The object passed is not a valid locale object. Please see ",__modulename,__funcname),!1)},plugin.prototype.setLocale=function(locale){var __funcname="setLocale";if(!_.isString(locale))return console.error("[%s][%s] Argument locale needs to be a string. It is of type `%s` and value `%s`.",__modulename,__funcname,typeof locale,locale),!1;if(this.isBound(locale)){var binding=this.getBinding(locale);_.isString(binding)&&(locale=binding)}return Object.keys(__locale.locales).indexOf(locale)?__defaultLocale=locale:(console.error("[%s][%s] locale `%s` was not found..",__modulename,__funcname,locale),!1)},plugin.prototype.version=function(){return __version.join(".")},window.PhreakNation=window.PhreakNation||{},window.PhreakNation.Plugins=window.PhreakNation.Plugins||{},window.PhreakNation.Plugins[__pluginname]=plugin}();